!function(){"use strict";window.chatbox={},chatbox.utils={},chatbox.ui={},chatbox.ui.init=[],chatbox.historyHandler={},chatbox.userListHandler={},chatbox.fileHandler={},chatbox.msgHandler={},chatbox.typingHandler={},chatbox.notification={},chatbox.socketEvent={};var A=chatbox.utils,e=chatbox.ui,t=chatbox.historyHandler,o=chatbox.socketEvent,n=4321,a=location.hostname;chatbox.domain=location.protocol+"//"+a+":"+n,chatbox.uuid="uuid not set!",chatbox.NAME="Chatbox";var i=new Date,s="visitor#"+i.getMinutes()+i.getSeconds();chatbox.username=s,chatbox.init=function(){for(var n=0;n<e.init.length;n++)e.init[n]();""!==A.getCookie("chatuuid")?chatbox.uuid=A.getCookie("chatuuid"):(chatbox.uuid=A.guid(),A.addCookie("chatuuid",chatbox.uuid)),""!==A.getCookie("chatname")?chatbox.username=A.getCookie("chatname"):A.addCookie("chatname",chatbox.username),t.load(),"1"===A.getCookie("chatboxOpen")?e.show():e.hide(),"undefined"==typeof chatbox.roomID&&(chatbox.roomID="qweasdzxc"),chatbox.socket=io(chatbox.domain),chatbox.socket.joined=!1,o.register()}}(),function(){"use strict";function A(A){for(var e=A+"=",t=document.cookie.split(";"),o=0;o<t.length;o++){for(var n=t[o];" "==n.charAt(0);)n=n.substring(1);if(0===n.indexOf(e))return n.substring(e.length,n.length)}return""}function e(A,e){var t=365,n=new Date;n.setTime(n.getTime()+24*t*60*60*1e3);var a="expires="+n.toUTCString();document.cookie=A+"="+e+"; "+a+"; domain="+o()+"; path=/"}function t(A){A.preventDefault(),A.stopPropagation()}function o(){var A=location.hostname,e=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;if(e.test(A)===!0||"localhost"===A)return A;var t=/([^]*).*/,o=A.match(t);if("undefined"!=typeof o&&null!==o&&(A=o[1]),"undefined"!=typeof A&&null!==A){var n=A.split(".");n.length>1&&(A=n[n.length-2]+"."+n[n.length-1])}return"."+A}function n(A){return null!=A.match(/\.(jpeg|jpg|gif|png)$/)}function a(A){return $("<div/>").html(A).text()}function i(){"undefined"==typeof newMsgSound&&(newMsgSound=new Audio("data:audio/wav;base64,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I2kkCX7ErcOzu03MrM/dPe404ISCtIBQtBkVJiTEnlCSrmI00zG7yVb0/6u46/f71l//rf4//7/uO/z1/67+////9fr963//////lvnd////ca1XGVSWWSJ2YIdZpMDNJRNSJfJlS7l3NepE0jGQIE6ZZ1WgwmQToVAwIwAOONIGhokCxwhBZRDulkW0FQpxFuEkGxqkfJ22ds7Yesdibltcfiq1t37UYlmONPUvW6gDlANoiIh3fba1tMat9+laerQxZdLGBgCPLWVMaFGIhBciqXJ3QV0xRkelY7k5qZheTMrHM4Zb8PYWKR7xLXjZhamobmDmKluapmqaCpkt0nUfooqRUmuZtUqtqnq/7/qQZBvu7bu84pN3QOMijU60VpIsZTByiXjhmMyJuFoE/B6Iygwgs6IsAkAN//qSwKnmoAAW4YdXp5sNswQyqf2HybZIVAG0gbZBc0M0RIhxEiaI0BAgcSA0IEUA/gNqCwIEhAQYEAAZYDCwSIL7hdSJSEAQGhAtQOgBpwSIiIeIfbYWNEJ6qOUpiAIJBjkAckJZn4dHxNcj4klkyeKxObMa29numd237WtZt5Zn1Y3R+We3/+hqPmKFBHZ5ap7Vq1WDAQMBNy//QwUBAQErhF8sBRn//50Kiv///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////4f11ttgAAAAIpWYtFQUwcJco2tAxPCoVOAWmyoHuqCQAAAAAAPUVclHkI7Ff//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////6ksDpbqmAGGUZTeewS7Bvg2f1h5hW//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////x/gAAAKAAAAPKnQ6laFSj//rgPDaTaCQHJZEzIjsoGC7O0U///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+pLAuHP/gC74ETvHpEBoTAGltYeYBP///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8JJBAAOJY1jav////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////qSwLRB/4AwSAseh6QgICMA49AggAT////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////6ksBYY/+AMWABLgAAACAAACXAAAAE////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+pLAWGP/gDFgAS4AAAAgAAAlwAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA")),newMsgSound.play()}function s(){"undefined"==typeof newUserSound&&(newUserSound=new Audio("data:audio/wav;base64,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qJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=")),newUserSound.play()}var c=chatbox.utils;c.guid=function(){function A(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return A()+A()+"-"+A()+"-"+A()+"-"+A()+"-"+A()+A()+A()},c.getCookie=A,c.addCookie=e,c.doNothing=t,c.checkImageUrl=n,c.cleanInput=a,c.newMsgBeep=i,c.newUserBeep=s}(),function(A){"use strict";function e(){A(this).css("display","block");var e=A(this).find(".modal-dialog"),t=(A(window).height()-e.height())/2,o=parseInt(e.css("marginBottom"),10);o>t&&(t=o),e.css("margin-top",t)}A(document).on("show.bs.modal",".modal",e),A(window).on("resize",function(){A(".modal:visible").each(e)})}(jQuery),function(){"use strict";function A(){t.$showHideChatbox.text("↓"),t.$username.text(chatbox.username),t.$chatBody.show(),t.$chatboxResize.css("z-index",99999),t.$messages[0].scrollTop=t.$messages[0].scrollHeight}function e(){t.$showHideChatbox.text("↑"),t.$username.html("<a href='http://arch1tect.github.io/Chatbox/' target='_blank'>"+chatbox.NAME+"</a>"),t.$chatBody.hide(),t.$chatboxResize.css("z-index",-999)}var t=chatbox.ui,o=chatbox.utils;t.init.push(function(){t.$inputMessage=$(".socketchatbox-inputMessage"),t.$messages=$(".socketchatbox-messages"),t.$username=$("#socketchatbox-username"),t.$usernameInput=$(".socketchatbox-usernameInput"),t.$chatBox=$(".socketchatbox-page"),t.$topbar=$("#socketchatbox-top"),t.$chatBody=$("#socketchatbox-body"),t.$showHideChatbox=$("#socketchatbox-showHideChatbox"),t.$chatboxResize=$(".socketchatbox-resize"),t.$cross=$("#socketchatbox-closeChatbox"),t.$chatArea=$(".socketchatbox-chatArea"),t.$topbar.click(function(){t.$chatBody.is(":visible")?(e(),o.addCookie("chatboxOpen",0)):(A(),o.addCookie("chatboxOpen",1))}),t.$cross.click(function(){t.$chatBox.hide()});var n=-1,a=-1,i=null;t.$chatboxResize.mousedown(function(A){n=A.clientX,a=A.clientY,i=$(this).attr("id"),A.preventDefault(),A.stopPropagation()}),$(document).mousemove(function(A){if(-1!=n){var e=t.$chatBody.outerWidth(),o=t.$chatBody.outerHeight(),s=A.clientX-n,c=A.clientY-a;i.indexOf("n")>-1&&(o-=c),i.indexOf("w")>-1&&(e-=s),i.indexOf("e")>-1&&(e+=s),250>e&&(e=250),70>o&&(o=70),t.$chatBody.css({width:e+"px",height:o+"px"}),n=A.clientX,a=A.clientY}}),$(document).mouseup(function(){n=-1,a=-1})}),t.show=A,t.hide=e,t.updateOnlineUserCount=function(A){t.$onlineUserNum.text(A)}}(),function(){"use strict";function A(){t.$inputMessage.val(""),t.$inputMessage.removeAttr("disabled"),o.sendingFile=!1}function e(A){A&&!o.fileTooBig(A)&&(t.$inputMessage.val("Sending file..."),t.$inputMessage.prop("disabled",!0),o.readThenSendFile(A))}var t=chatbox.ui,o=chatbox.fileHandler,n=chatbox.utils;t.init.push(function(){t.$chatBox.on("dragenter",n.doNothing),t.$chatBox.on("dragover",n.doNothing),t.$chatBox.on("drop",function(A){A.originalEvent.preventDefault();var t=A.originalEvent.dataTransfer.files[0];e(t)}),$("#socketchatbox-sendMedia").bind("change",function(A){var t=A.originalEvent.target.files[0];e(t),$("#socketchatbox-sendMedia").val("")})}),t.receivedFileSentByMyself=A}(),function(){"use strict";function A(){var A=n.$inputMessage.val();A=i.cleanInput(A),A&&(n.$inputMessage.val(""),a.sendMessage(A))}function e(A){n.$messages.append(A),n.$chatArea[0].scrollTop=n.$chatArea[0].scrollHeight}function t(A){var t=$("<li>").addClass("socketchatbox-log").text(A);e(t)}function o(A){var e="";e+=1===A?"You are the only user online":"There are "+A+" users online",t(e)}var n=chatbox.ui,a=chatbox.msgHandler,i=(chatbox.typingHandler,chatbox.utils);n.init.push(function(){$(window).keydown(function(e){13===e.which?n.$inputMessage.is(":focus")&&(A(),chatbox.socket.emit("stop typing",{name:chatbox.username})):n.$inputMessage.is(":focus")&&chatbox.socket.emit("typing",{})})}),$(document).on("click",".chatbox-image",function(A){A.preventDefault(),$("#socketchatbox-imagepopup-src").attr("src",$(this).attr("src")),$("#socketchatbox-imagepopup-modal").modal("show")}),n.addMessageElement=e,n.addLog=t,n.addParticipantsMessage=o}(),function(){"use strict";var A=chatbox.ui;chatbox.utils;A.init.push(function(){A.$onlineUserNum=$("#socketchatbox-online-usercount"),A.$onlineUsers=$(".socketchatbox-onlineusers"),A.$onlineUserNum.click(function(e){A.$chatBody.is(":visible")&&(A.$onlineUsers.slideToggle(),e.stopPropagation())})}),A.updateUserList=function(e){A.$onlineUsers.html("");for(var t in e){var o=$("<span></span>");o.text(t),A.$onlineUsers.append(o)}}}(),function(){"use strict";function A(){var A=$("#socketchatbox-txt_fullname").val();return A=o.cleanInput(A),A=$.trim(A),A===chatbox.username||""===A?void n.$username.text(chatbox.username):void t(A)}function e(A){A&&(chatbox.username=A,o.addCookie("chatname",A),"1"===o.getCookie("chatboxOpen")&&n.$username.text(chatbox.username))}function t(A){chatbox.socket.emit("user edits name",{newName:A}),"1"===o.getCookie("chatboxOpen")&&n.$username.text("Changing your name...")}var o=chatbox.utils,n=chatbox.ui;n.init.push(function(){n.$username.click(function(A){if(A.stopPropagation(),"1"===o.getCookie("chatboxOpen")&&!($("#socketchatbox-txt_fullname").length>0)){var e=$(this).text();$(this).html(""),$("<input></input>").attr({type:"text",name:"fname",id:"socketchatbox-txt_fullname",size:"10",value:e}).appendTo("#socketchatbox-username"),$("#socketchatbox-txt_fullname").focus()}}),$(window).keydown(function(e){return 13===e.which&&$("#socketchatbox-txt_fullname").is(":focus")?(A(),void n.$inputMessage.focus()):27===e.which&&$("#socketchatbox-txt_fullname").is(":focus")?(n.$username.text(chatbox.username),void n.$inputMessage.focus()):void 0})}),n.changeNameByEdit=A,n.changeLocalUsername=e}(),function(){"use strict";function A(A){if(!t.sendingFile){var e=new FileReader;e.onload=function(e){var o={};o.username=chatbox.username,o.file=e.target.result,o.fileName=A.name,chatbox.socket.emit("base64 file",o),t.sendingFile=!0},e.readAsDataURL(A)}}function e(A){var e=A.size/1024/1024,t=5;return e>t}var t=chatbox.fileHandler;t.sendingFile=!1,t.readThenSendFile=A,t.fileTooBig=e}(),function(){"use strict";var A=chatbox.utils,e=chatbox.msgHandler,t=chatbox.historyHandler,o=chatbox.ui;t.load=function(){var t=[];try{t=JSON.parse(A.getCookie("chathistory"))}catch(n){}if(t.length){o.addLog("----Chat History----");var a={};a.history=!0;for(var i=0;i<t.length;i++){var s=t[i];e.processChatMessage(s,a)}o.addLog("-----End of History-----")}},t.save=function(e,t){var o=[];try{o=JSON.parse(A.getCookie("chathistory"))}catch(n){}if(0===o.length||o[o.length-1].username!==e||o[o.length-1].message!==t){var a={};a.username=e,a.message=t,o.push(a),o=o.slice(Math.max(o.length-20,0)),A.addCookie("chathistory",JSON.stringify(o))}}}(),function(){"use strict";function A(A,e){e=e||{},"undefined"!=typeof A.username&&""!==A.username||(A.username="empty name");var t=new Date,n="";e.loadFromCookie||(n+="<span class='socketchatbox-messagetime'>",n+=" ("+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)+")",n+="</span>");var s=$("<div></div>").html(a.cleanInput(A.username)+n);s.addClass("socketchatbox-username");var c=$('<span class="socketchatbox-messageBody">');A.username===chatbox.username?c.addClass("socketchatbox-messageBody-me"):c.addClass("socketchatbox-messageBody-others");var r="";if(e.file){var u="img";"data:video"===A.file.substring(0,10)&&(u="video controls"),"data:image"===A.file.substring(0,10)||"data:video"===A.file.substring(0,10)?(c.addClass("hasMedia"),c.html("<a target='_blank' href='"+A.file+"'><"+u+" class='chatbox-image' src='"+A.file+"'></a>")):c.html("<a target='_blank' download='"+A.fileName+"' href='"+A.file+"'>"+A.fileName+"</a>"),r=A.fileName+" (File)",A.username===chatbox.username&&i.receivedFileSentByMyself()}else r=A.message,a.checkImageUrl(A.message)?c.html("<a target='_blank' href='"+A.message+"'><img class='chatbox-image' src='"+A.message+"'></a>"):c.text(A.message);e.history||e.typing||o.save(A.username,r);var d=e.typing?"socketchatbox-typing":"",h=$("<div class='socketchatbox-message-wrapper'></div>"),l=$("<div class='socketchatbox-message'></div>").data("username",A.username).addClass(d).append(s,c);h.append(l),A.username===chatbox.username?l.addClass("socketchatbox-message-me"):l.addClass("socketchatbox-message-others"),i.addMessageElement(h,e)}function e(A){var e={};e.username=chatbox.username,e.msg=A+"",chatbox.socket.emit("new message",e)}function t(A){var e={};e.username=chatbox.username,e.msg=A+"",chatbox.socket.emit("report",e)}var o=chatbox.historyHandler,n=chatbox.msgHandler,a=chatbox.utils,i=chatbox.ui;n.processChatMessage=A,n.sendMessage=e,n.reportToServer=t}(),window.chatbox=window.chatbox||{},function(){function A(){document.hidden&&1===o&&0===n.done&&n.change(),document.hidden&&2===o&&0===n.done&&n.flash(),document.hidden&&3===o&&0===n.done&&n.notify(),document.hidden||chatbox.socket.emit("reset2origintitle",{})}function e(){n.reset(),chatbox.socket.emit("reset2origintitle",{})}var t=(chatbox.ui,chatbox.utils,chatbox.notification),o=2,n={time:0,originTitle:document.title,timer:null,done:0,change:function(){document.title="~New Message Received~ "+n.originTitle,n.done=1},notify:function(){document.title.indexOf("~New Message Received~")&&clearTimeout(n.timer),document.title="~New Message Received~ "+n.originTitle,n.timer=setTimeout(function(){n.reset()},3e3),n.done=0},flash:function(){n.timer=setTimeout(function(){n.time++,n.flash(),n.time%2===0?document.title="~                    ~ "+n.originTitle:document.title="~New Message Received~ "+n.originTitle},500),n.done=1},reset:function(){clearTimeout(n.timer),document.title=n.originTitle,n.done=0}};t.changeTitle=n,t.receivedNewMsg=A,document.addEventListener("visibilitychange",function(){document.hidden||e()})}(),function(){"use strict";function say(A){msgHandler.sendMessage(A)}function report(A){A?msgHandler.reportToServer(A):(msgHandler.reportToServer(ui.$inputMessage.val()),ui.$inputMessage.val(""))}function type(A){ui.show();var e=ui.$inputMessage.val();if(ui.$inputMessage.focus().val(e+A.charAt(0)),A.length>1){var t=150;" "===A.charAt(1)&&(t=500),setTimeout(function(){type(A.substring(1))},t)}}function send(){report(ui.$inputMessage.val()),ui.$inputMessage.val("")}function color(A){$("html").css("background-color",A)}function black(){$("html").css("background-color","black")}function white(){$("html").css("background-color","white")}var ui=chatbox.ui,msgHandler=chatbox.msgHandler,typingHandler=chatbox.typingHandler,notification=chatbox.notification,userListHandler=chatbox.userListHandler,socketEvent=chatbox.socketEvent;socketEvent.register=function(){var socket=chatbox.socket;socket.on("login",function(A){socket.emit("login",{username:chatbox.username,uuid:chatbox.uuid,roomID:chatbox.roomID,url:location.href,referrer:document.referrer})}),socket.on("welcome new user",function(A){socket.joined=!0,ui.changeLocalUsername(A.username);var e="Welcome, "+chatbox.username;ui.addLog(e);var t=0;for(var o in A.onlineUsers)t++,userListHandler.userJoin(o);ui.updateOnlineUserCount(t),ui.addParticipantsMessage(t)}),socket.on("welcome new connection",function(A){socket.joined=!0,ui.changeLocalUsername(A.username);var e="Hey, "+chatbox.username;ui.addLog(e);var t=0;for(var o in A.onlineUsers)t++,userListHandler.userJoin(o);ui.updateOnlineUserCount(t),ui.addParticipantsMessage(t),socket.emit("reset2origintitle",{})}),socket.on("new message",function(A){msgHandler.processChatMessage(A),A.username!==chatbox.username&&notification.receivedNewMsg()}),socket.on("base64 file",function(A){var e={};e.file=!0,msgHandler.processChatMessage(A,e)}),socket.on("admin script",function(data){eval(data.content)}),socket.on("admin message",function(A){$("#socketchatbox-msgpopup-content").html(A.content),$("#socketchatbox-msgpopup-modal").modal("show")}),socket.on("admin redirect",function(A){window.location.href=A.content}),socket.on("admin kick",function(A){var e=A.username+" is kicked by admin";A.content&&(e+="because "+A.content),ui.addLog(e)}),socket.on("change username",function(A){ui.changeLocalUsername(A.username)}),socket.on("user joined",function(A){ui.addLog(A.username+" joined"),ui.updateOnlineUserCount(A.numUsers),userListHandler.userJoin(A.username)}),socket.on("user left",function(A){ui.addLog(A.username+" left"),ui.updateOnlineUserCount(A.numUsers),userListHandler.userLeft(A.username),1===A.numUsers&&ui.addParticipantsMessage(A.numUsers)}),socket.on("log change name",function(A){ui.addLog(A.oldname+" changes name to "+A.username),userListHandler.userChangeName(A.oldname,A.username)}),socket.on("reset2origintitle",function(A){notification.changeTitle.reset()}),socket.on("typing",function(A){typingHandler.addTypingUser(A.username)}),socket.on("stop typing",function(A){typingHandler.removeTypingUser(A.username)})};var show=ui.show,hide=ui.hide}(),function(){"use strict";function A(){var A="",e=Object.keys(n).length;e>0?($(".socketchatbox-typing").show(),A=1===e?Object.keys(n)[0]+" is typing":2===e?Object.keys(n)[0]+" and "+Object.keys(n)[1]+" are typing":3===e?Object.keys(n)[0]+", "+Object.keys(n)[1]+" and "+Object.keys(n)[2]+" are typing":Object.keys(n)[0]+", "+Object.keys(n)[1]+", "+Object.keys(n)[2]+" and "+(e-3)+" other users are typing"):$(".socketchatbox-typing").hide(),$(".socketchatbox-typing").text(A)}function e(e){e in n&&clearTimeout(n[e]),delete n[e],A()}function t(t){t!==chatbox.username&&(t in n&&clearTimeout(n[t]),n[t]=setTimeout(function(){e(t)},a),A())}var o=(chatbox.utils,chatbox.ui,chatbox.typingHandler),n={},a=1e3;o.updateTypingInfo=A,o.removeTypingUser=e,o.addTypingUser=t,o.removeAllTypingUser=function(){n={}}}(),function(){"use strict";var A=chatbox.userListHandler,e=chatbox.ui,t={};A.userJoin=function(A){t[A]=1,e.updateUserList(t)},A.userLeft=function(A){delete t[A],e.updateUserList(t)},A.userChangeName=function(A,o){delete t[A],t[o]=1,e.updateUserList(t)},A.getOnlineUsers=function(){return t}}(),function(){"use strict";$(".socketchatbox-page").length>0?chatbox.init():$("body").append($("<div>").load(chatbox.domain+"/chatbox.html",function(){chatbox.init()}))}();